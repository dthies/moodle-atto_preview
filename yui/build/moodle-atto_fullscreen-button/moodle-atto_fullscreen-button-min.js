YUI.add("moodle-atto_fullscreen-button",function(e,t){var n="atto_preview",r="preview",i=!1;e.namespace("M.atto_preview").Button=e.Base.create("button",e.M.editor_atto.EditorPlugin,[],{initializer:function(){var e=this.addButton({icon:"preview",iconComponent:n,callback:this._toggle}),t=this.get("host");e.set("title","Toggle preview")},_toggle:function(e){e.preventDefault();var t=this.buttons[r];t.getData(i)?(this.unHighlightButtons(r),this._setpreview(t)):(this.highlightButtons(r),this._setpreview(t,!0))},_fitToScreen:function(){var e=this.buttons[r];if(!e.getData(i))return;var t=this.get("host"),n,s=t.editor.hasAttribute("hidden")||t.editor.getComputedStyle("display")==="none";this._background.setStyles({left:-t.editor.get("winWidth")/2,height:t.editor.get("winHeight"),width:t.editor.get("winWidth")}),window.scroll(this._background.getX(),this._background.getY()),t._wrapper.setStyles({maxWidth:"100%",width:"100%",top:0}),t.editor.show(),n=parseFloat(t.editor.getComputedStyle("height"))+t.editor.get("winHeight")-parseFloat(t._wrapper.getComputedStyle("height")),t.editor.setStyles({height:n,maxHeight:n}),n=parseFloat(n)+20,t.textarea.setStyles({padding:t.editor.getComputedStyle("padding"),margin:t.editor.getComputedStyle("margin"),width:t.editor.getComputedStyle("width"),height:n,maxHeight:n,top:t.editor.getY()-t.toolbar.getY()}),t.textarea.setStyle("margin-bottom",parseFloat(t.editor.getComputedStyle("margin-bottom"))+20);if(s){this.editor.hide();if(t.textarea.hasAttribute("hidden")||t.textarea.getComputedStyle("display")==="none")this._background.setStyles({left:"0px",padding:t._wrapper.getComputedStyle("padding"),margin:t._wrapper.getComputedStyle("margin"),height:t._wrapper.getComputedStyle("height"),width:t._wrapper.getComputedStyle("width")}),window.scroll(this._background.getX(),this._background.getY())}},_setpreview:function(t,n){var r=this.get("host");n?(e.one("body").setStyle("overflow","hidden"),this._editorStyle={minHeight:r.editor.getStyle("min-height"),height:r.editor.getStyle("height")},e.one("body").insertBefore(this._background,r._wrapper),r._wrapper.setStyles({position:"fixed",top:"0px",left:"0px",scroll:"auto"}),e.one("body").addClass("atto-preview"),r.textarea.setStyles({position:"fixed",overflow:"auto",left:0}),r._wrapper.setStyles({left:0,position:"fixed"})):(e.one("body").setStyle("overflow","inherit"),this._background.remove(),this._editorStyle&&(r.editor.removeAttribute("style"),r.editor.setStyles(this._editorStyle),r.textarea.getComputedStyle("display")==="none"?(r.textarea.removeAttribute("style"),r.textarea.setStyle("display","none")):r.textarea.removeAttribute("style")),r._wrapper.removeAttribute("style"),e.one("body").removeClass("atto-preview"),r.textarea.setStyle("width",this.toolbar.getComputedStyle("width"))),t.setData(i,!!n),this._fitToScreen()}})},"@VERSION@");
